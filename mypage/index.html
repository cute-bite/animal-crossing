---
layout: default
title: ë§ˆì´í˜ì´ì§€
---

<section class="content card">
  <h1>ë§ˆì´í˜ì´ì§€</h1>
  <p class="muted">ì´ ë¸Œë¼ìš°ì €ì—ë§Œ ì €ì¥ë¼ìš”. ì„œë²„ë¡œ ì—…ë¡œë“œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>

  <div class="mypage-panels">
    <!-- ë‚´ ì„¬ ì£¼ë¯¼ -->
    <div class="panel">
      <h2>ğŸï¸ ë‚´ ì„¬ ì£¼ë¯¼ <span class="badge" id="count-islanders">0</span></h2>

      <!-- ì¶”ê°€ í¼ -->
      <form id="form-islander" class="add-form" autocomplete="off">
        <input type="text" name="name" placeholder="ì´ë¦„ (ì˜ˆ: ë ˆì´ë¨¼ë“œ)" required>
        <input type="url"  name="href" placeholder="í”„ë¡œí•„ ë§í¬ (ì„ íƒ)">
        <button class="btn btn-primary">ï¼‹ ì¶”ê°€</button>
        <small class="help">ìµœëŒ€ 10ëª…ê¹Œì§€</small>
      </form>

      <!-- ëª©ë¡ -->
      <div id="islanders-list" class="pill-grid empty">ì €ì¥ëœ ì£¼ë¯¼ì´ ì—†ì–´ìš”.</div>

      <div class="panel-actions">
        <button class="btn btn-outline" id="export-islanders">ë‚´ë³´ë‚´ê¸°</button>
        <button class="btn btn-ghost" id="clear-islanders">ì´ˆê¸°í™”</button>
      </div>
    </div>

    <!-- ìµœì•  ì£¼ë¯¼ -->
    <div class="panel" id="favs">
      <h2>â¤ ìµœì•  ì£¼ë¯¼ <span class="badge" id="count-favs">0</span></h2>

      <!-- ì¶”ê°€ í¼ -->
      <form id="form-fav" class="add-form" autocomplete="off">
        <input type="text" name="name" placeholder="ì´ë¦„ (ì˜ˆ: ìº¬ë¥´ë¯¸)" required>
        <input type="url"  name="href" placeholder="í”„ë¡œí•„ ë§í¬ (ì„ íƒ)">
        <button class="btn btn-primary">â™¡ ì¶”ê°€</button>
      </form>

      <!-- ëª©ë¡ -->
      <div id="favs-list" class="pill-grid empty">ì €ì¥ëœ ì£¼ë¯¼ì´ ì—†ì–´ìš”.</div>

      <div class="panel-actions">
        <button class="btn btn-outline" id="export-favs">ë‚´ë³´ë‚´ê¸°</button>
        <button class="btn btn-ghost" id="clear-favs">ì´ˆê¸°í™”</button>
      </div>
    </div>
  </div>

  <details class="hint">
    <summary>ë‚˜ì¤‘ì— ê³ ê¸‰: ì£¼ë¯¼ í˜ì´ì§€/ë¦¬ìŠ¤íŠ¸ì— â€œï¼‹ ë‚´ ì„¬ / â™¡ ìµœì• â€ ë²„íŠ¼ ë¶™ì´ê¸°</summary>
    <p>ì‚¬ì´íŠ¸ ì „ì—­ì—ì„œ ìë™ìœ¼ë¡œ ì €ì¥ ë²„íŠ¼ì„ ë¶™ì´ëŠ” ìŠ¤ë‹ˆí«ë„ ì œê³µí•´ë“œë¦´ ìˆ˜ ìˆì–´ìš”. ìš°ì„ ì€ ì´ ë§ˆì´í˜ì´ì§€ì—ì„œ ì§ì ‘ ì¶”ê°€/ì‚­ì œë§Œìœ¼ë¡œ ìš´ì˜í•´ë„ ì¶©ë¶„í•©ë‹ˆë‹¤.</p>
  </details>
</section>

<script>
(() => {
  const KEY_FAVS = "acnh_favorites_v1";
  const KEY_ISL  = "acnh_islanders_v1";
  const LIMIT_ISL = 10;

  const get = k => JSON.parse(localStorage.getItem(k) || "[]");
  const set = (k,v) => localStorage.setItem(k, JSON.stringify(v));
  const slug = s => (s || "").trim().toLowerCase().replace(/\s+/g,"-");

  function addItem(key, item, max = null){
    let list = get(key);
    // ê°™ì€ ì´ë¦„ ì¤‘ë³µ ë°©ì§€ (idê°€ ìˆìœ¼ë©´ idë¡œ, ì—†ìœ¼ë©´ nameìœ¼ë¡œ)
    const id = item.id || slug(item.name);
    if(!id) return;
    if(list.find(v => (v.id || slug(v.name)) === id)) return alert("ì´ë¯¸ ì¶”ê°€ë˜ì–´ ìˆì–´ìš”!");
    if(max && list.length >= max) return alert(`ìµœëŒ€ ${max}ëª…ê¹Œì§€ ì €ì¥í•  ìˆ˜ ìˆì–´ìš”.`);
    list.push({ id, name: item.name, href: item.href || "" });
    set(key, list);
    renderAll();
  }

  function removeItem(key, id){
    const list = get(key).filter(v => (v.id || slug(v.name)) !== id);
    set(key, list);
    renderAll();
  }

  function exportList(key){
    const list = get(key);
    const text = list.map(v => v.name || v.id).join(", ");
    navigator.clipboard?.writeText(text)
      .then(()=>alert("ë³µì‚¬ ì™„ë£Œ:\n" + text))
      .catch(()=>prompt("ë³µì‚¬ ì‹¤íŒ¨! ì•„ë˜ í…ìŠ¤íŠ¸ë¥¼ ë³µì‚¬í•´ ì£¼ì„¸ìš”.", text));
  }

  function clearList(key){
    if(!confirm("ì •ë§ ì´ˆê¸°í™”í• ê¹Œìš”?")) return;
    set(key, []);
    renderAll();
  }

  function renderList(key, mountId, countId){
    const list = get(key);
    const $wrap = document.getElementById(mountId);
    const $count = document.getElementById(countId);
    $count.textContent = list.length;

    if(!list.length){
      $wrap.classList.add("empty");
      $wrap.innerHTML = "ì €ì¥ëœ ì£¼ë¯¼ì´ ì—†ì–´ìš”.";
      return;
    }
    $wrap.classList.remove("empty");
    $wrap.innerHTML = list.map(v => {
      const id = v.id || slug(v.name);
      const name = v.name || v.id;
      const href = v.href || "#";
      return `
        <div class="pill">
          <a href="${href}">${name}</a>
          <button class="pill-x" data-key="${key}" data-id="${id}" aria-label="ì‚­ì œ">Ã—</button>
        </div>
      `;
    }).join("");
  }

  function renderAll(){
    renderList(KEY_ISL, "islanders-list", "count-islanders");
    renderList(KEY_FAVS, "favs-list", "count-favs");
  }

  // í¼ ì²˜ë¦¬
  function hookForm(formId, key, max=null){
    const $form = document.getElementById(formId);
    $form.addEventListener("submit", e=>{
      e.preventDefault();
      const fd = new FormData($form);
      const name = (fd.get("name") || "").toString().trim();
      const href = (fd.get("href") || "").toString().trim();
      if(!name) return;
      addItem(key, { name, href }, max);
      $form.reset();
    });
  }

  // ë²„íŠ¼ ìœ„ì„
  document.addEventListener("click", e=>{
    if(e.target.matches(".pill-x")){
      removeItem(e.target.dataset.key, e.target.dataset.id);
    }
    if(e.target.id === "export-islanders") exportList(KEY_ISL);
    if(e.target.id === "export-favs")       exportList(KEY_FAVS);
    if(e.target.id === "clear-islanders")   clearList(KEY_ISL);
    if(e.target.id === "clear-favs")        clearList(KEY_FAVS);
  });

  document.addEventListener("DOMContentLoaded", () => {
    hookForm("form-islander", KEY_ISL, LIMIT_ISL);
    hookForm("form-fav", KEY_FAVS, null);
    renderAll();
  });
})();
</script>

<style>
/* ë§ˆì´í˜ì´ì§€ ì „ìš© ì†ŒëŸ‰ ìŠ¤íƒ€ì¼ */
.muted{ color: var(--muted); }
.mypage-panels{ display:grid; gap:16px; grid-template-columns:1fr; }
@media(min-width:900px){ .mypage-panels{ grid-template-columns:1fr 1fr; } }
.panel h2{ margin:0 0 8px; }
.add-form{ display:flex; gap:8px; flex-wrap:wrap; margin:8px 0 10px; }
.add-form input{
  flex:1 1 180px; min-width:180px;
  padding:8px 10px; border:1px solid var(--border); border-radius:8px;
  background:var(--bg);
}
.add-form .help{ color:var(--muted); align-self:center; }

.pill-grid{
  display:flex; flex-wrap:wrap; gap:8px;
  min-height:42px; padding:6px; border:1px solid var(--border);
  border-radius:12px; background:var(--bg);
}
.pill-grid.empty{ color:var(--muted); }
.pill{
  display:inline-flex; align-items:center; gap:8px;
  padding:6px 10px; border-radius:999px;
  background:var(--surface); border:1px solid var(--border);
}
.pill a{ color:inherit; text-decoration:none; }
.pill-x{
  border:0; background:transparent; cursor:pointer;
  font-weight:700; line-height:1; font-size:16px; opacity:.6;
}
.pill-x:hover{ opacity:1; }

.panel-actions{ margin-top:8px; display:flex; gap:8px; }
.btn{ padding:6px 10px; border-radius:8px; cursor:pointer; }
.btn-primary{ background:var(--accent); color:#fff; border:1px solid var(--accent); }
.btn-outline{ background:transparent; border:1px solid var(--border); }
.btn-ghost{ background:transparent; border:0; color:var(--muted); }
</style>
